<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>è€å¸«ç«¯å­¸ç”Ÿç´€éŒ„</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    table { width: 100%; }
    th, td { text-align: center; vertical-align: middle; }
    th { background-color: #f8f9fa; }
  </style>
</head>
<body>
  <div class="container mt-4">
    <h2>ğŸ“š å­¸ç”Ÿå•ç­”ç´€éŒ„</h2>
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>ID</th>
          <th>å­¸æ ¡</th>
          <th>å­¸è™Ÿ</th>
          <th>å§“å</th>
          <th>å•é¡Œ</th>
          <th>ğŸ¦„ Gemini</th>
          <th>ğŸ¢ ChatGPT</th>
          <th>ğŸ¦Š Grok</th>
          <th>æ™‚é–“</th>
        </tr>
      </thead>
      <tbody id="recordTable"></tbody>
    </table>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    async function loadRecords() {
      try {
        const res = await axios.get("http://127.0.0.1:5000/get_records");
        const tbody = document.getElementById("recordTable");
        tbody.innerHTML = "";

        res.data.forEach(r => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${r.id}</td>
            <td>${r.school}</td>
            <td>${r.studentID}</td>
            <td>${r.studentName}</td>
            <td style="text-align:left; max-width:200px; word-wrap:break-word;">${r.question}</td>
            <td style="text-align:left; max-width:200px; word-wrap:break-word;">${r.gemini_answer || ''}</td>
            <td style="text-align:left; max-width:200px; word-wrap:break-word;">${r.chatgpt_answer || ''}</td>
            <td style="text-align:left; max-width:200px; word-wrap:break-word;">${r.grok_answer || ''}</td>
            <td>${r.timestamp}</td>
          `;
          tbody.appendChild(tr);
        });
      } catch (err) {
        console.error(err);
        alert("è¼‰å…¥å­¸ç”Ÿç´€éŒ„å¤±æ•—");
      }
    }

    // é é¢è¼‰å…¥æ™‚å…ˆå–å¾—ç´€éŒ„
    loadRecords();

    // æ¯ 5 ç§’è‡ªå‹•åˆ·æ–°ä¸€æ¬¡
    setInterval(loadRecords, 5000);

    axios.get("/get_records").then(res => console.log(res.data))
  </script>
</body>
</html>
